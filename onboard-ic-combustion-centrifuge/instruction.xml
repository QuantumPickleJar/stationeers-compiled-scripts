<?xml version="1.0" encoding="utf-8"?>
<InstructionData xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <DateTime>134067378007737984</DateTime>
  <GameVersion>0.2.4297.19997</GameVersion>
  <Title>onboard-ic-combustion-centrifuge</Title>
  <Description />
  <Author>Basic IC10 Compiler</Author>
  <WorkshopFileHandle>0</WorkshopFileHandle>
  <Instructions># tuneables
# hysteresis band
# throttle step increment
# fudge factor for stress
# throttle limiter while accelerating
# limiter once stable
# switch from pulsing to closed loop here
# considered at-speed
init:
# safe defaults
s db On 1 #l.22
move r3 0 #l.23
move r2 20 #l.24
j setKnobs #l.25
startup:
# pulse 10% throttle
l r6 db Rpm #l.29
bge r6 100 20 #l.30
move r3 10 #l.31
j setKnobs #l.32
control:
# read current telemetry
l r4 db Stress #l.39
l r6 db Rpm #l.40
# choose limiter
move r2 50 #l.43
bge r6 450 29 #l.44
move r2 20 #l.45
# todo: verify if this belongs outside IF
move r5 5 #l.50
# rTmp = target - halfBand
# IF rStress &lt; rTmp THEN GOTO thUp
sub r0 45 r5 #l.54
bge r4 r0 35 #l.54
j thUp #l.54
add r1 45 r5 #l.57
add r0 45 r5 #l.58
ble r4 r0 39 #l.58
j thDown #l.58
setKnobs:
# round rTh to nearest 10, clamp 0..100, cap by limiter
move r1 r3 #l.65
div r0 r1 10 #l.66
add r1 r0 0.5 #l.66
floor r0 r1 #l.67
mul r1 r0 10 #l.67
bge r1 0 48 #l.69
move r1 0 #l.69
ble r1 100 50 #l.70
move r1 100 #l.70
ble r1 r2 52 #l.71
move r1 r2 #l.71
s db Throttle r1 #l.72
move r1 r2 #l.74
div r0 r1 10 #l.75
add r1 r0 0.5 #l.75
floor r0 r1 #l.76
mul r1 r0 10 #l.76
bge r1 0 60 #l.78
move r1 0 #l.78
ble r1 100 62 #l.79
move r1 100 #l.79
s db Limiter r1 #l.81
yield #l.83
j startup #l.84
thUp:
l r0 db Throttle #l.87
add r3 r0 10 #l.87
j setKnobs #l.88
thDown:
l r0 db Throttle #l.91
sub r3 r0 10 #l.91
j setKnobs #l.92
# Compiled at 2025-11-05 19:49 by Exca's Basic10.</Instructions>
</InstructionData>